<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">

    <!-- Создание таблицы faculty -->
    <include file="db/changelog/1.0/2024-11-10--0001-faculty.xml"/>

    <!-- Создание основных таблиц -->
    <include file="db/changelog/1.0/2024-04-05--0001-batch.xml"/>
    <include file="db/changelog/1.0/2024-04-05--0002-subgroup.xml"/>
    <include file="db/changelog/1.0/2024-04-05--0003-teacher.xml"/>
    <include file="db/changelog/1.0/2024-04-05--0004-subject.xml"/>
    <include file="db/changelog/1.0/2024-04-05--0005-schedule.xml"/>
    <include file="db/changelog/1.0/2024-06-29--0006-user.xml"/>
    <include file="db/changelog/1.0/2024-07-01--0007-photo.xml"/>

    <!-- Добавление связей с faculty -->
    <include file="db/changelog/1.0/2024-11-10--0002-add-faculty-to-batch.xml"/>
    <include file="db/changelog/1.0/2024-11-10--0003-add-faculty-to-teacher.xml"/>
    <include file="db/changelog/1.0/2024-11-10--0004-add-faculty-and-role-to-user.xml"/>
    
    <!-- Обновление ограничения ролей -->
    <include file="db/changelog/1.0/2024-11-10--0005-update-role-constraint.xml"/>
    
    <!-- Обновление user: nullable группы, длина пароля -->
    <include file="db/changelog/1.0/2024-11-10--0005-make-user-group-nullable.xml"/>
    
    <!-- Создание суперадмина -->
    <include file="db/changelog/1.0/2024-11-10--0006-insert-superadmin.xml"/>

    <!-- Загрузка начальных данных -->
    <include file="db/changelog/data/2024-04-05--0001-batch-data.xml"/>
    <include file="db/changelog/data/2024-04-05--0002-subgroup-data.xml"/>
    <include file="db/changelog/data/2024-04-05--0003-teacher-data.xml"/>
    <include file="db/changelog/data/2024-04-05--0004-subject-data.xml"/>
    <include file="db/changelog/data/2024-04-05--0005-schedule-data.xml"/>

</databaseChangeLog>  